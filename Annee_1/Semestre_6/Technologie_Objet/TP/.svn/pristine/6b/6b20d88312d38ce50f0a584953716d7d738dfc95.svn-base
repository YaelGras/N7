package allumettes;

import java.util.NoSuchElementException;
import java.util.Scanner;

public class HumainStrategie implements Strategie{
	private String nom;
	private Scanner scanner;
	
	public HumainStrategie(String nom) {
		this.nom = nom;
		this.scanner = new Scanner(System.in);
	}
	
	@Override
	public int getPrise(Jeu jeu) {
		boolean reponseInvalide = true;
		int prise = 0;
		do {
			String choix = "";
			try {
				System.out.println(this.nom + ", combien d'allumettes ?");
				choix = scanner.nextLine();
				prise = Integer.parseInt(choix);
				reponseInvalide = false;				
			} catch (NumberFormatException|NoSuchElementException e ) {
				if (choix.contentEquals("triche")) {
					triche(jeu);
				} else {
					System.out.println("Vous devez rentrer un entier");
				}
			}
		} while (reponseInvalide);
		return prise;
	}
	
	private void triche(Jeu jeu) {
		try {
			jeu.retirer(1);
		} catch (CoupInvalideException e) {
			System.err.println("Erreur humain tricheur : " + e.getMessage());
		}
		System.out.print("[Une allumette en moins, plus que ");
		System.out.println(jeu.getNombreAllumettes() + ". Chut !]");
		
	}
	
	protected void finalize() {
		this.scanner.close();
	}
}
