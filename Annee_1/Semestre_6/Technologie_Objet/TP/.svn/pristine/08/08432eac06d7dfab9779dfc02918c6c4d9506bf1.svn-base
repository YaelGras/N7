package allumettes;

import java.util.NoSuchElementException;
import java.util.Scanner;

public class HumainStrategie implements Strategie{
	private Scanner scanner;
	private String nom;
	
	public HumainStrategie(String nom) {
		this.scanner = new Scanner(System.in);
		this.nom = nom;
	}
	
	@Override
	public int getPrise(Jeu jeu) {
		boolean reponseInvalide = true;
		int prise = 0;
		do {
			String choix = scanner.nextLine();
			try {
				prise = Integer.parseInt(choix);
				reponseInvalide = false;
			} catch (NumberFormatException|NoSuchElementException e ) {
				if (choix == "triche") {
					triche(jeu);
				} else {
					System.out.println("Vous devez rentrer un entier");
				}
			}
		} while (reponseInvalide);
		return prise;
	}
	
	private void triche(Jeu jeu) {
		try {
			jeu.retirer(1);
		} catch (CoupInvalideException e) {
			System.err.println("Erreur humain tricheur : " + e.getMessage());
		}
		System.out.print("[Une allumette en moins, plus que ");
		System.out.println(jeu.getNombreAllumettes() + ". Chut !]");
		System.out.println(this.nom + ", combien d'allumettes ?");
	}

}
