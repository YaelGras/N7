package src.affichagePartie;

import javax.swing.*;
import java.awt.*;


public class statHabitants extends JPanel {
    private static JLabel bonheurIcon, bonhommeIcon;
    private static resizeFontJlabel titre, bonheurValue, nbhabitant;

    public statHabitants() {
        super();
        this.setLayout(null);

        bonheurIcon = new JLabel();        
        bonheurIcon.setVerticalAlignment(SwingConstants.CENTER);
        bonheurIcon.setHorizontalAlignment(SwingConstants.CENTER);
        bonhommeIcon = new JLabel();
        bonhommeIcon.setVerticalAlignment(SwingConstants.CENTER);
        bonhommeIcon.setHorizontalAlignment(SwingConstants.CENTER);
        bonhommeIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/bonhomme.png"));
        titre = new resizeFontJlabel("Habitants");
        bonheurValue = new resizeFontJlabel("");
        nbhabitant = new resizeFontJlabel("");

        titre.setHorizontalAlignment(SwingConstants.CENTER);       
        bonheurValue.setHorizontalAlignment(SwingConstants.CENTER);
        nbhabitant.setHorizontalAlignment(SwingConstants.CENTER);

        
        this.add(bonheurIcon);
        this.add(bonhommeIcon);
        this.add(titre);
        this.add(bonheurValue);
        this.add(nbhabitant);

        updateBonheur(100);
        updatePopulation(100);

        this.setVisible(true);
    }

    // Cela permets d'update les valeur de bonheur et du nombre d'habitant sans crÃ©er une instance de stathabitants.

    public static void updateBonheur(int value) {
        bonheurValue.setText(value + " %");
        if(value > 80) {
            bonheurIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/heureux.png"));
        } else if(value > 60) {
            bonheurIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/content.png"));
        } else if(value > 40) {
            bonheurIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/pascontent.png"));
        } else {
            bonheurIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/triste.png"));
        }
    }

    public static void updatePopulation(int nb_habitant) {
        nbhabitant.setText("" + nb_habitant);
    }

    void updatePosition() {

        titre.setBounds(0, 0, this.getWidth(),  1*this.getHeight()/5);

        bonhommeIcon.setBounds(0,  1*this.getHeight()/5, this.getWidth()/2, 3*this.getHeight()/5);

        nbhabitant.setBounds(0,  4*this.getHeight()/5, this.getWidth()/2, this.getHeight()/5);

        bonheurIcon.setBounds(this.getWidth()/2,  1*this.getHeight()/5, this.getWidth()/2, 3*this.getHeight()/5);

        bonheurValue.setBounds(this.getWidth()/2,  4*this.getHeight()/5, this.getWidth()/2, this.getHeight()/5);   
            
        this.updateImage();

        titre.updateFont();
        bonheurValue.updateFont();
        nbhabitant.updateFont();
    }

    public void updateImage() {        
        bonheurIcon.setIcon(resizeSquareIcon((ImageIcon) bonheurIcon.getIcon(), bonheurIcon));
        bonhommeIcon.setIcon(resizeSquareIcon((ImageIcon) bonhommeIcon.getIcon(), bonhommeIcon));
    }

    private ImageIcon resizeSquareIcon(ImageIcon icon, JLabel label) {
        try {
            int taille = Math.min(label.getWidth(), label.getHeight()); 
            return new ImageIcon(icon.getImage().getScaledInstance(taille, taille, Image.SCALE_SMOOTH));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return icon;
    }

}
