package src.affichagePartie;

import javax.swing.*;
import java.awt.*;


public class statHabitants extends JPanel {
    private JLabel bonheurIcon, bonhommeIcon;
    private JLabel titre, bonheurValue, nbhabitant;

    public statHabitants() {
        super();
        this.setLayout(null);

        this.bonheurIcon = new JLabel();        
        this.bonheurIcon.setVerticalAlignment(SwingConstants.CENTER);
        this.bonheurIcon.setHorizontalAlignment(SwingConstants.CENTER);
        this.bonhommeIcon = new JLabel();
        this.bonhommeIcon.setVerticalAlignment(SwingConstants.CENTER);
        this.bonhommeIcon.setHorizontalAlignment(SwingConstants.CENTER);
        this.bonhommeIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/bonhomme.png"));
        this.titre = new JLabel("Habitants", SwingConstants.CENTER);
        this.bonheurValue = new JLabel("", SwingConstants.CENTER);
        this.nbhabitant = new JLabel("", SwingConstants.CENTER);

        
        this.add(this.bonheurIcon);
        this.add(this.bonhommeIcon);
        this.add(this.titre);
        this.add(this.bonheurValue);
        this.add(this.nbhabitant);

        this.updateBonheur(100);
        this.updatePopulation(100);

        this.setVisible(true);
    }

    public void updateBonheur(int value) {
        this.bonheurValue.setText(value + " %");
        if(value > 80) {
            this.bonheurIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/heureux.png"));
        } else if(value > 60) {
            this.bonheurIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/content.png"));
        } else if(value > 40) {
            this.bonheurIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/pascontent.png"));
        } else {
            this.bonheurIcon.setIcon(new ImageIcon("src/Images/Icones_Stats/triste.png"));
        }
    }

    public void updatePopulation(int nb_habitant) {
        this.nbhabitant.setText("" + nb_habitant);
    }

    void updatePosition() {

        this.titre.setBounds(0, 0, this.getWidth(),  1*this.getHeight()/5);

        this.bonhommeIcon.setBounds(0,  1*this.getHeight()/5, this.getWidth()/2, 2*this.getHeight()/5);

        this.nbhabitant.setBounds(0,  4*this.getHeight()/5, this.getWidth()/2, this.getHeight()/5);

        this.bonheurIcon.setBounds(this.getWidth()/2,  1*this.getHeight()/5, this.getWidth()/2, 3*this.getHeight()/5);

        this.bonheurValue.setBounds(this.getWidth()/2,  4*this.getHeight()/5, this.getWidth()/2, this.getHeight()/5);   
            
        this.updateImage();
    }

    public void updateImage() {        
        this.bonheurIcon.setIcon(resizeSquareIcon((ImageIcon) this.bonheurIcon.getIcon(), this.bonheurIcon));
        this.bonhommeIcon.setIcon(resizeSquareIcon((ImageIcon) this.bonhommeIcon.getIcon(), this.bonhommeIcon));
    }

    private ImageIcon resizeSquareIcon(ImageIcon icon, JLabel label) {
        try {
            int taille = Math.min(label.getWidth(), label.getHeight()); 
            return new ImageIcon(icon.getImage().getScaledInstance(taille, taille, Image.SCALE_SMOOTH));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return icon;
    }

}
